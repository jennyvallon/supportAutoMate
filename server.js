process.env.NODE_ENV = process.env.NODE_ENV || 'development';//if value does not exist set it to 'development'//var mongoose = require('./config/mongoose'), //database we'll be connecting to    express = require('./config/express');//express application //var db = mongoose(); //initialize db instancevar app = express();//initialize express instancevar server = require('http').createServer(app);var io = require('socket.io')(server);var fs=require('fs'); var connections=[];  io.on('connection', function (socket) {    connections.push(socket);        console.log("There are "+connections.length+" socket connection(s) to autoMate application");     socket.on('retrieve log',function(data){        var fileName="./logs/"+data+".txt";        fs.openSync(fileName,"a+");        var log=fs.readFileSync('./logs/'+data+'.txt','utf8');        socket.emit("log",log);      });    socket.on('disconnect', function() {         connections.pop();        console.log("A user has closed their autoMate window");        console.log("There are "+connections.length+" socket connection(s) to autoMate application");    });     });//connection eventserver.listen(4000); module.exports = server;console.log('Server running at http://localhost:4000/ in a '+ process.env.NODE_ENV +' environment'); 